//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package svg ;import (_ce "encoding/xml";_gb "fmt";_gf "github.com/unidoc/unipdf/v3/common";_ad "github.com/unidoc/unipdf/v3/contentstream";_cdd "github.com/unidoc/unipdf/v3/contentstream/draw";_a "github.com/unidoc/unipdf/v3/internal/graphic2d";_cd "golang.org/x/net/html/charset";
_d "io";_c "math";_fb "os";_g "strconv";_f "strings";_ee "unicode";);func _ba (_fbe *GraphicSVG ,_dedf *_ad .ContentCreator ){_dedf .Add_q ();_fbe .Style .toContentStream (_dedf );_fe ,_gdd :=_abec (_fbe .Attributes ["\u0078"],64);if _gdd !=nil {_gf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0078\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_gdd .Error ());
};_cde ,_gdd :=_abec (_fbe .Attributes ["\u0079"],64);if _gdd !=nil {_gf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0079\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_gdd .Error ());
};_dg ,_gdd :=_abec (_fbe .Attributes ["\u0077\u0069\u0064t\u0068"],64);if _gdd !=nil {_gf .Log .Debug ("\u0045\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0077\u0069\u0064\u0074\u0068\u0020v\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gdd .Error ());
};_dae ,_gdd :=_abec (_fbe .Attributes ["\u0068\u0065\u0069\u0067\u0068\u0074"],64);if _gdd !=nil {_gf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077h\u0069\u006c\u0065 \u0070\u0061\u0072\u0073i\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0068\u0065\u0069\u0067\u0068\u0074\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gdd .Error ());
};_dedf .Add_re (_fe *_fbe ._aaf ,_cde *_fbe ._aaf ,_dg *_fbe ._aaf ,_dae *_fbe ._aaf );if _fbe .Style .FillColor !=""&&_fbe .Style .StrokeColor !=""{_dedf .Add_B ();}else if _fbe .Style .FillColor !=""{_dedf .Add_f ();}else if _fbe .Style .StrokeColor !=""{_dedf .Add_S ();
};_dedf .Add_Q ();};func _bef ()commands {var _egc =map[string ]int {"\u006d":2,"\u007a":0,"\u006c":2,"\u0068":1,"\u0076":1,"\u0063":6,"\u0073":4,"\u0071":4,"\u0074":2,"\u0061":7};var _bbe []string ;for _edfe :=range _egc {_bbe =append (_bbe ,_edfe );};
return commands {_bbe ,_egc ,"\u006d","\u007a"};};func (_bdcf *GraphicSVG )setDefaultScaling (_dec float64 ){_bdcf ._aaf =_dec ;if _bdcf .Style !=nil &&_bdcf .Style .StrokeWidth > 0{_bdcf .Style .StrokeWidth =_bdcf .Style .StrokeWidth *_bdcf ._aaf ;};for _ ,_fba :=range _bdcf .Children {_fba .setDefaultScaling (_dec );
};};func _ffbd (_dga string )(_eca []float64 ,_gge error ){var _egba float64 ;_cadf :=0;_dfd :=true ;for _agb ,_afaf :=range _dga {if _afaf =='.'{if _dfd {_dfd =false ;continue ;};_egba ,_gge =_abec (_dga [_cadf :_agb ],64);if _gge !=nil {return ;};_eca =append (_eca ,_egba );
_cadf =_agb ;};};_egba ,_gge =_abec (_dga [_cadf :],64);if _gge !=nil {return ;};_eca =append (_eca ,_egba );return ;};var _edfa commands ;func _fag (_ccg *GraphicSVG ,_fca *_ad .ContentCreator ){_fca .Add_q ();_ccg .Style .toContentStream (_fca );_aed ,_eba :=_cee (_ccg .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);
if _eba !=nil {_gf .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_eba );
return ;};if len (_aed )%2> 0{_gf .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _fdbb :=0;_fdbb < len (_aed );{if _fdbb ==0{_fca .Add_m (_aed [_fdbb ]*_ccg ._aaf ,_aed [_fdbb +1]*_ccg ._aaf );}else {_fca .Add_l (_aed [_fdbb ]*_ccg ._aaf ,_aed [_fdbb +1]*_ccg ._aaf );};_fdbb +=2;};_fca .Add_l (_aed [0]*_ccg ._aaf ,_aed [1]*_ccg ._aaf );
if _ccg .Style .FillColor !=""&&_ccg .Style .StrokeColor !=""{_fca .Add_B ();}else if _ccg .Style .FillColor !=""{_fca .Add_f ();}else if _ccg .Style .StrokeColor !=""{_fca .Add_S ();};_fca .Add_h ();_fca .Add_Q ();};var (_ff =[]string {"\u0063\u006d","\u006d\u006d","\u0070\u0078","\u0070\u0074"};
_af =map[string ]float64 {"\u0063\u006d":_gd ,"\u006d\u006d":_b ,"\u0070\u0078":_cb ,"\u0070\u0074":1};);func _bcc (_aga map[string ]string ,_bgcg float64 )(*GraphicSVGStyle ,error ){_fdfg :=_ggbc ();_bdbd ,_fdcb :=_aga ["\u0066\u0069\u006c\u006c"];if _fdcb {_fdfg .FillColor =_bdbd ;
if _bdbd =="\u006e\u006f\u006e\u0065"{_fdfg .FillColor ="";};};_fggf ,_acg :=_aga ["\u0073\u0074\u0072\u006f\u006b\u0065"];if _acg {_fdfg .StrokeColor =_fggf ;if _fggf =="\u006e\u006f\u006e\u0065"{_fdfg .StrokeColor ="";};};_bcde ,_ebdf :=_aga ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
if _ebdf {_gbee ,_baf :=_abec (_bcde ,64);if _baf !=nil {return nil ,_baf ;};_fdfg .StrokeWidth =_gbee *_bgcg ;};return _fdfg ,nil ;};func (_ffb *GraphicSVGStyle )toContentStream (_deaa *_ad .ContentCreator ){if _ffb ==nil {return ;};if _ffb .FillColor !=""{var _cce ,_add ,_eabd float64 ;
if _fef ,_age :=_a .ColorMap [_ffb .FillColor ];_age {_ebd ,_aff ,_fadg ,_ :=_fef .RGBA ();_cce ,_add ,_eabd =float64 (_ebd ),float64 (_aff ),float64 (_fadg );}else {_cce ,_add ,_eabd =_fadb (_ffb .FillColor );};_deaa .Add_rg (_cce ,_add ,_eabd );};if _ffb .StrokeColor !=""{var _ece ,_dag ,_ede float64 ;
if _aebe ,_abe :=_a .ColorMap [_ffb .StrokeColor ];_abe {_eced ,_fab ,_caf ,_ :=_aebe .RGBA ();_ece ,_dag ,_ede =float64 (_eced )/255.0,float64 (_fab )/255.0,float64 (_caf )/255.0;}else {_ece ,_dag ,_ede =_fadb (_ffb .StrokeColor );};_deaa .Add_RG (_ece ,_dag ,_ede );
};if _ffb .StrokeWidth > 0{_deaa .Add_w (_ffb .StrokeWidth );};};func (_accgg pathParserError )Error ()string {return _accgg ._faa };func _cee (_bfe string )([]float64 ,error ){_ecd :=-1;var _aecg []float64 ;_cda :=' ';for _ggfa ,_eabc :=range _bfe {if !_ee .IsNumber (_eabc )&&_eabc !='.'&&!(_eabc =='-'&&_cda =='e')&&_eabc !='e'{if _ecd !=-1{_fbcb ,_efd :=_ffbd (_bfe [_ecd :_ggfa ]);
if _efd !=nil {return _aecg ,_efd ;};_aecg =append (_aecg ,_fbcb ...);};if _eabc =='-'{_ecd =_ggfa ;}else {_ecd =-1;};}else if _ecd ==-1{_ecd =_ggfa ;};_cda =_eabc ;};if _ecd !=-1&&_ecd !=len (_bfe ){_afab ,_cfc :=_ffbd (_bfe [_ecd :]);if _cfc !=nil {return _aecg ,_cfc ;
};_aecg =append (_aecg ,_afab ...);};return _aecg ,nil ;};func _fggc (_fgc []float64 )[]float64 {for _agfd ,_ecc :=0,len (_fgc )-1;_agfd < _ecc ;_agfd ,_ecc =_agfd +1,_ecc -1{_fgc [_agfd ],_fgc [_ecc ]=_fgc [_ecc ],_fgc [_agfd ];};return _fgc ;};func _fg (_dcf *GraphicSVG ,_bba *_ad .ContentCreator ){_bba .Add_q ();
_dcf .Style .toContentStream (_bba );_fgg ,_gde :=_abec (_dcf .Attributes ["\u0078\u0031"],64);if _gde !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gde .Error ());
};_fcf ,_gde :=_abec (_dcf .Attributes ["\u0079\u0031"],64);if _gde !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gde .Error ());
};_cf ,_gde :=_abec (_dcf .Attributes ["\u0078\u0032"],64);if _gde !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gde .Error ());
};_geg ,_gde :=_abec (_dcf .Attributes ["\u0079\u0032"],64);if _gde !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_gde .Error ());
};_bba .Add_m (_fgg *_dcf ._aaf ,_fcf *_dcf ._aaf );_bba .Add_l (_cf *_dcf ._aaf ,_geg *_dcf ._aaf );if _dcf .Style .FillColor !=""&&_dcf .Style .StrokeColor !=""{_bba .Add_B ();}else if _dcf .Style .FillColor !=""{_bba .Add_f ();}else if _dcf .Style .StrokeColor !=""{_bba .Add_S ();
};_bba .Add_h ();_bba .Add_Q ();};func _fgd (_afa _ce .StartElement )*GraphicSVG {_acc :=&GraphicSVG {};_egd :=make (map[string ]string );for _ ,_ffg :=range _afa .Attr {_egd [_ffg .Name .Local ]=_ffg .Value ;};_acc .Name =_afa .Name .Local ;_acc .Attributes =_egd ;
_acc ._aaf =1;if _acc .Name =="\u0073\u0076\u0067"{_gae ,_aeb :=_cee (_egd ["\u0076i\u0065\u0077\u0042\u006f\u0078"]);if _aeb !=nil {_gf .Log .Debug ("\u0055\u006ea\u0062\u006c\u0065\u0020t\u006f\u0020p\u0061\u0072\u0073\u0065\u0020\u0076\u0069\u0065w\u0042\u006f\u0078\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074e\u003a\u0020\u0025\u0076",_aeb );
return nil ;};_acc .ViewBox .X =_gae [0];_acc .ViewBox .Y =_gae [1];_acc .ViewBox .W =_gae [2];_acc .ViewBox .H =_gae [3];_acc .Width =_acc .ViewBox .W ;_acc .Height =_acc .ViewBox .H ;if _eab ,_fdc :=_egd ["\u0077\u0069\u0064t\u0068"];_fdc {_geb ,_ddd :=_abec (_eab ,64);
if _ddd !=nil {_gf .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0077\u0069\u0064\u0074\u0068\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_ddd );return nil ;};_acc .Width =_geb ;
};if _afc ,_eac :=_egd ["\u0068\u0065\u0069\u0067\u0068\u0074"];_eac {_gbb ,_gac :=_abec (_afc ,64);if _gac !=nil {_gf .Log .Debug ("\u0055\u006eab\u006c\u0065\u0020t\u006f\u0020\u0070\u0061rse\u0020he\u0069\u0067\u0068\u0074\u0020\u0061\u0074tr\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_gac );
return nil ;};_acc .Height =_gbb ;};if _acc .Width > 0&&_acc .Height > 0{_acc ._aaf =_acc .Width /_acc .ViewBox .W ;};};return _acc ;};func (_gcd *Command )isAbsolute ()bool {return _gcd .Symbol ==_f .ToUpper (_gcd .Symbol )};func (_ade *Command )compare (_bfge *Command )bool {if _ade .Symbol !=_bfge .Symbol {return false ;
};for _bbf ,_bfd :=range _ade .Params {if _bfd !=_bfge .Params [_bbf ]{return false ;};};return true ;};func (_dcac *Subpath )compare (_gdeb *Subpath )bool {if len (_dcac .Commands )!=len (_gdeb .Commands ){return false ;};for _dcg ,_bcbg :=range _dcac .Commands {if !_bcbg .compare (_gdeb .Commands [_dcg ]){return false ;
};};return true ;};type Subpath struct{Commands []*Command ;};func _eg (_ag *GraphicSVG ,_bb *_ad .ContentCreator ){_bb .Add_q ();_ag .Style .toContentStream (_bb );_ed ,_cbb :=_fdcbg (_ag .Attributes ["\u0064"]);if _cbb !=nil {_gf .Log .Error ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025s",_cbb .Error ());
};var (_ga ,_bf =0.0,0.0;_fa ,_bg =0.0,0.0;_eb *Command ;);for _ ,_fd :=range _ed .Subpaths {for _ ,_edg :=range _fd .Commands {switch _f .ToLower (_edg .Symbol ){case "\u006d":_fa ,_bg =_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ;if !_edg .isAbsolute (){_fa ,_bg =_ga +_fa -_ag .ViewBox .X ,_bf +_bg -_ag .ViewBox .Y ;
};_bb .Add_m (_efb (_fa ,3),_efb (_bg ,3));_ga ,_bf =_fa ,_bg ;case "\u0063":_ac ,_bga ,_fdb ,_dc ,_ge ,_cg :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ,_edg .Params [2]*_ag ._aaf ,_edg .Params [3]*_ag ._aaf ,_edg .Params [4]*_ag ._aaf ,_edg .Params [5]*_ag ._aaf ;
if !_edg .isAbsolute (){_ac ,_bga ,_fdb ,_dc ,_ge ,_cg =_ga +_ac ,_bf +_bga ,_ga +_fdb ,_bf +_dc ,_ga +_ge ,_bf +_cg ;};_bb .Add_c (_efb (_ac ,3),_efb (_bga ,3),_efb (_fdb ,3),_efb (_dc ,3),_efb (_ge ,3),_efb (_cg ,3));_ga ,_bf =_ge ,_cg ;case "\u0073":_agc ,_dea ,_fad ,_aa :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ,_edg .Params [2]*_ag ._aaf ,_edg .Params [3]*_ag ._aaf ;
if !_edg .isAbsolute (){_agc ,_dea ,_fad ,_aa =_ga +_agc ,_bf +_dea ,_ga +_fad ,_bf +_aa ;};_bb .Add_c (_efb (_ga ,3),_efb (_bf ,3),_efb (_agc ,3),_efb (_dea ,3),_efb (_fad ,3),_efb (_aa ,3));_ga ,_bf =_fad ,_aa ;case "\u006c":_dce ,_gbe :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ;
if !_edg .isAbsolute (){_dce ,_gbe =_ga +_dce ,_bf +_gbe ;};_bb .Add_l (_efb (_dce ,3),_efb (_gbe ,3));_ga ,_bf =_dce ,_gbe ;case "\u0068":_bgg :=_edg .Params [0]*_ag ._aaf ;if !_edg .isAbsolute (){_bgg =_ga +_bgg ;};_bb .Add_l (_efb (_bgg ,3),_efb (_bf ,3));
_ga =_bgg ;case "\u0076":_bc :=_edg .Params [0]*_ag ._aaf ;if !_edg .isAbsolute (){_bc =_bf +_bc ;};_bb .Add_l (_efb (_ga ,3),_efb (_bc ,3));_bf =_bc ;case "\u0071":_cbg ,_ded ,_bgd ,_ca :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ,_edg .Params [2]*_ag ._aaf ,_edg .Params [3]*_ag ._aaf ;
if !_edg .isAbsolute (){_cbg ,_ded ,_bgd ,_ca =_ga +_cbg ,_bf +_ded ,_ga +_bgd ,_bf +_ca ;};_ebg ,_ef :=_a .QuadraticToCubicBezier (_ga ,_bf ,_cbg ,_ded ,_bgd ,_ca );_bb .Add_c (_efb (_ebg .X ,3),_efb (_ebg .Y ,3),_efb (_ef .X ,3),_efb (_ef .Y ,3),_efb (_bgd ,3),_efb (_ca ,3));
_ga ,_bf =_bgd ,_ca ;case "\u0074":var _ceg ,_fc _a .Point ;_dd ,_eef :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ;if !_edg .isAbsolute (){_dd ,_eef =_ga +_dd ,_bf +_eef ;};if _eb !=nil &&_f .ToLower (_eb .Symbol )=="\u0071"{_da :=_a .Point {X :_eb .Params [0]*_ag ._aaf ,Y :_eb .Params [1]*_ag ._aaf };
_bgag :=_a .Point {X :_eb .Params [2]*_ag ._aaf ,Y :_eb .Params [3]*_ag ._aaf };_cea :=_bgag .Mul (2.0).Sub (_da );_ceg ,_fc =_a .QuadraticToCubicBezier (_ga ,_bf ,_cea .X ,_cea .Y ,_dd ,_eef );};_bb .Add_c (_efb (_ceg .X ,3),_efb (_ceg .Y ,3),_efb (_fc .X ,3),_efb (_fc .Y ,3),_efb (_dd ,3),_efb (_eef ,3));
_ga ,_bf =_dd ,_eef ;case "\u0061":_ggb ,_gbc :=_edg .Params [0]*_ag ._aaf ,_edg .Params [1]*_ag ._aaf ;_be :=_edg .Params [2];_bgb :=_edg .Params [3]> 0;_ec :=_edg .Params [4]> 0;_gdb ,_cae :=_edg .Params [5]*_ag ._aaf ,_edg .Params [6]*_ag ._aaf ;if !_edg .isAbsolute (){_gdb ,_cae =_ga +_gdb ,_bf +_cae ;
};_df :=_a .EllipseToCubicBeziers (_ga ,_bf ,_ggb ,_gbc ,_be ,_bgb ,_ec ,_gdb ,_cae );for _ ,_bd :=range _df {_bb .Add_c (_efb (_bd [1].X ,3),_efb ((_bd [1].Y ),3),_efb ((_bd [2].X ),3),_efb ((_bd [2].Y ),3),_efb ((_bd [3].X ),3),_efb ((_bd [3].Y ),3));
};_ga ,_bf =_gdb ,_cae ;case "\u007a":_bb .Add_h ();};_eb =_edg ;};};if _ag .Style .FillColor !=""&&_ag .Style .StrokeColor !=""{_bb .Add_B ();}else if _ag .Style .FillColor !=""{_bb .Add_f ();}else if _ag .Style .StrokeColor !=""{_bb .Add_S ();};_bb .Add_h ();
_bb .Add_Q ();};const (_cb =0.72;_gd =28.3464;_b =_gd /10;_gg =0.551784;);type Path struct{Subpaths []*Subpath ;};func (_fcd *GraphicSVG )ToContentCreator (cc *_ad .ContentCreator ,scaleX ,scaleY ,translateX ,translateY float64 )*_ad .ContentCreator {if _fcd .Name =="\u0073\u0076\u0067"{_fcd .SetScaling (scaleX ,scaleY );
cc .Add_cm (1,0,0,1,translateX ,translateY );_fcd .setDefaultScaling (_fcd ._aaf );cc .Add_q ();_fcga :=_c .Max (scaleX ,scaleY );cc .Add_re (_fcd .ViewBox .X *_fcga ,_fcd .ViewBox .Y *_fcga ,_fcd .ViewBox .W *_fcga ,_fcd .ViewBox .H *_fcga );cc .Add_W ();
cc .Add_n ();for _ ,_adb :=range _fcd .Children {_adb .ViewBox =_fcd .ViewBox ;_adb .toContentStream (cc );};cc .Add_Q ();return cc ;};return nil ;};func _abec (_gbbg string ,_fed int )(float64 ,error ){_cfe ,_edfg :=_dgbe (_gbbg );_ebga ,_cge :=_g .ParseFloat (_cfe ,_fed );
if _cge !=nil {return 0,_cge ;};if _ada ,_bde :=_af [_edfg ];_bde {_ebga =_ebga *_ada ;}else {_ebga =_ebga *_cb ;};return _ebga ,nil ;};func _efb (_bfgb float64 ,_ccf int )float64 {_aagd :=_c .Pow (10,float64 (_ccf ));return float64 (_ggad (_bfgb *_aagd ))/_aagd ;
};func ParseFromString (svgStr string )(*GraphicSVG ,error ){return ParseFromStream (_f .NewReader (svgStr ));};func _fdcbg (_dgd string )(*Path ,error ){_edfa =_bef ();_aca ,_cfb :=_babe (_cdc (_dgd ));if _cfb !=nil {return nil ,_cfb ;};return _daf (_aca ),nil ;
};func ParseFromFile (path string )(*GraphicSVG ,error ){_cff ,_edf :=_fb .Open (path );if _edf !=nil {return nil ,_edf ;};defer _cff .Close ();return ParseFromStream (_cff );};type GraphicSVG struct{ViewBox struct{X ,Y ,W ,H float64 ;};Name string ;Attributes map[string ]string ;
Children []*GraphicSVG ;Content string ;Style *GraphicSVGStyle ;Width float64 ;Height float64 ;_aaf float64 ;};func (_bcb *GraphicSVG )toContentStream (_fec *_ad .ContentCreator ){_aad ,_cba :=_bcc (_bcb .Attributes ,_bcb ._aaf );if _cba !=nil {_gf .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0073\u0074\u0079\u006c\u0065\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_cba );
};_bcb .Style =_aad ;switch _bcb .Name {case "\u0070\u0061\u0074\u0068":_eg (_bcb ,_fec );for _ ,_deda :=range _bcb .Children {_deda .toContentStream (_fec );};case "\u0072\u0065\u0063\u0074":_ba (_bcb ,_fec );for _ ,_ceag :=range _bcb .Children {_ceag .toContentStream (_fec );
};case "\u0063\u0069\u0072\u0063\u006c\u0065":_ffd (_bcb ,_fec );for _ ,_dgb :=range _bcb .Children {_dgb .toContentStream (_fec );};case "\u0065l\u006c\u0069\u0070\u0073\u0065":_ebe (_bcb ,_fec );for _ ,_ggg :=range _bcb .Children {_ggg .toContentStream (_fec );
};case "\u0070\u006f\u006c\u0079\u006c\u0069\u006e\u0065":_gdde (_bcb ,_fec );for _ ,_bgc :=range _bcb .Children {_bgc .toContentStream (_fec );};case "\u0070o\u006c\u0079\u0067\u006f\u006e":_fag (_bcb ,_fec );for _ ,_dcee :=range _bcb .Children {_dcee .toContentStream (_fec );
};case "\u006c\u0069\u006e\u0065":_fg (_bcb ,_fec );for _ ,_aafd :=range _bcb .Children {_aafd .toContentStream (_fec );};case "\u0067":_aadg ,_eaa :=_bcb .Attributes ["\u0066\u0069\u006c\u006c"];_bge ,_bdb :=_bcb .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];
_bdc ,_afdb :=_bcb .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];for _ ,_cfd :=range _bcb .Children {if _ ,_dge :=_cfd .Attributes ["\u0066\u0069\u006c\u006c"];!_dge &&_eaa {_cfd .Attributes ["\u0066\u0069\u006c\u006c"]=_aadg ;
};if _ ,_cgbc :=_cfd .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];!_cgbc &&_bdb {_cfd .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"]=_bge ;};if _ ,_cbc :=_cfd .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
!_cbc &&_afdb {_cfd .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"]=_bdc ;};_cfd .toContentStream (_fec );};};};func _ggad (_gcb float64 )int {return int (_gcb +_c .Copysign (0.5,_gcb ))};func _daf (_dggd []*Command )*Path {_bad :=&Path {};
var _gacg []*Command ;for _dgca ,_db :=range _dggd {switch _f .ToLower (_db .Symbol ){case _edfa ._ecb :if len (_gacg )> 0{_bad .Subpaths =append (_bad .Subpaths ,&Subpath {_gacg });};_gacg =[]*Command {_db };case _edfa ._eae :_gacg =append (_gacg ,_db );
_bad .Subpaths =append (_bad .Subpaths ,&Subpath {_gacg });_gacg =[]*Command {};default:_gacg =append (_gacg ,_db );if len (_dggd )==_dgca +1{_bad .Subpaths =append (_bad .Subpaths ,&Subpath {_gacg });};};};return _bad ;};func (_egb *commands )isCommand (_agce string )bool {for _ ,_fcda :=range _egb ._accg {if _f .ToLower (_agce )==_fcda {return true ;
};};return false ;};func _ggbc ()*GraphicSVGStyle {return &GraphicSVGStyle {FillColor :"\u00230\u0030\u0030\u0030\u0030\u0030",StrokeColor :"",StrokeWidth :0};};func (_ddf *GraphicSVG )SetScaling (xFactor ,yFactor float64 ){_dace :=_ddf .Width /_ddf .ViewBox .W ;
_dfff :=_ddf .Height /_ddf .ViewBox .H ;_ddf .setDefaultScaling (_c .Max (_dace ,_dfff ));for _ ,_aag :=range _ddf .Children {_aag .SetScaling (xFactor ,yFactor );};};func (_fcg *GraphicSVG )Decode (decoder *_ce .Decoder )error {for {_dff ,_bca :=decoder .Token ();
if _dff ==nil &&_bca ==_d .EOF {break ;};if _bca !=nil {return _bca ;};switch _ebed :=_dff .(type ){case _ce .StartElement :_bcd :=_fgd (_ebed );_beb :=_bcd .Decode (decoder );if _beb !=nil {return _beb ;};_fcg .Children =append (_fcg .Children ,_bcd );
case _ce .CharData :_fbc :=_f .TrimSpace (string (_ebed ));if _fbc !=""{_fcg .Content =string (_ebed );};case _ce .EndElement :if _ebed .Name .Local ==_fcg .Name {return nil ;};};};return nil ;};type Command struct{Symbol string ;Params []float64 ;};func _babe (_gaca []token )([]*Command ,error ){var (_acba []*Command ;
_ebgb []float64 ;);for _fafe :=len (_gaca )-1;_fafe >=0;_fafe --{_dgge :=_gaca [_fafe ];if _dgge ._fcae {_cdea :=_edfa ._gag [_f .ToLower (_dgge ._agea )];_fgdd :=len (_ebgb );if _cdea ==0&&_fgdd ==0{_ffgf :=&Command {Symbol :_dgge ._agea };_acba =append ([]*Command {_ffgf },_acba ...);
}else if _cdea !=0&&_fgdd %_cdea ==0{_bgf :=_fgdd /_cdea ;for _gff :=0;_gff < _bgf ;_gff ++{_cad :=_dgge ._agea ;if _cad =="\u006d"&&_gff < _bgf -1{_cad ="\u006c";};if _cad =="\u004d"&&_gff < _bgf -1{_cad ="\u004c";};_afbc :=&Command {_cad ,_fggc (_ebgb [:_cdea ])};
_acba =append ([]*Command {_afbc },_acba ...);_ebgb =_ebgb [_cdea :];};}else {_aedb :=pathParserError {"I\u006e\u0063\u006f\u0072\u0072\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072\u0020\u006f\u0066\u0020\u0070\u0061r\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0066\u006fr\u0020"+_dgge ._agea };
return nil ,_aedb ;};}else {_cffd ,_afbb :=_abec (_dgge ._agea ,64);if _afbb !=nil {return nil ,_afbb ;};_ebgb =append (_ebgb ,_cffd );};};return _acba ,nil ;};func _fadb (_cgfc string )(_dceea ,_aeda ,_adab float64 ){if (len (_cgfc )!=4&&len (_cgfc )!=7)||_cgfc [0]!='#'{_gf .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cgfc );
return _dceea ,_aeda ,_adab ;};var _ffbg ,_gega ,_eeb int ;if len (_cgfc )==4{var _deae ,_bgga ,_aedaf int ;_gbf ,_agd :=_gb .Sscanf (_cgfc ,"\u0023\u0025\u0031\u0078\u0025\u0031\u0078\u0025\u0031\u0078",&_deae ,&_bgga ,&_aedaf );if _agd !=nil {_gf .Log .Debug ("\u0049\u006e\u0076a\u006c\u0069\u0064\u0020h\u0065\u0078\u0020\u0063\u006f\u0064\u0065:\u0020\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_cgfc ,_agd );
return _dceea ,_aeda ,_adab ;};if _gbf !=3{_gf .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cgfc );return _dceea ,_aeda ,_adab ;};_ffbg =_deae *16+_deae ;_gega =_bgga *16+_bgga ;_eeb =_aedaf *16+_aedaf ;
}else {_bdcg ,_ggdg :=_gb .Sscanf (_cgfc ,"\u0023\u0025\u0032\u0078\u0025\u0032\u0078\u0025\u0032\u0078",&_ffbg ,&_gega ,&_eeb );if _ggdg !=nil {_gf .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cgfc );
return _dceea ,_aeda ,_adab ;};if _bdcg !=3{_gf .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069d\u0020\u0068\u0065\u0078\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0073,\u0020\u006e\u0020\u0021\u003d\u0020\u0033 \u0028\u0025\u0064\u0029",_cgfc ,_bdcg );
return _dceea ,_aeda ,_adab ;};};_bgec :=float64 (_ffbg )/255.0;_fggce :=float64 (_gega )/255.0;_aac :=float64 (_eeb )/255.0;return _bgec ,_fggce ,_aac ;};type pathParserError struct{_faa string };func (_acbe *Path )compare (_dee *Path )bool {if len (_acbe .Subpaths )!=len (_dee .Subpaths ){return false ;
};for _fadf ,_fbg :=range _acbe .Subpaths {if !_fbg .compare (_dee .Subpaths [_fadf ]){return false ;};};return true ;};func _eeac (_gbeg []token ,_eaeg string )([]token ,string ){if _eaeg !=""{_gbeg =append (_gbeg ,token {_eaeg ,false });_eaeg ="";};return _gbeg ,_eaeg ;
};func _ebe (_ebb *GraphicSVG ,_bggf *_ad .ContentCreator ){_bggf .Add_q ();_ebb .Style .toContentStream (_bggf );_ggf ,_ae :=_abec (_ebb .Attributes ["\u0063\u0078"],64);if _ae !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ae .Error ());
};_def ,_ae :=_abec (_ebb .Attributes ["\u0063\u0079"],64);if _ae !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ae .Error ());
};_cgb ,_ae :=_abec (_ebb .Attributes ["\u0072\u0078"],64);if _ae !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ae .Error ());
};_ace ,_ae :=_abec (_ebb .Attributes ["\u0072\u0079"],64);if _ae !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ae .Error ());
};_eff :=_cgb *_ebb ._aaf ;_fdf :=_ace *_ebb ._aaf ;_edc :=_ggf *_ebb ._aaf ;_bfg :=_def *_ebb ._aaf ;_cac :=_eff *_gg ;_acf :=_fdf *_gg ;_dac :=_cdd .NewCubicBezierPath ();_dac =_dac .AppendCurve (_cdd .NewCubicBezierCurve (-_eff ,0,-_eff ,_acf ,-_cac ,_fdf ,0,_fdf ));
_dac =_dac .AppendCurve (_cdd .NewCubicBezierCurve (0,_fdf ,_cac ,_fdf ,_eff ,_acf ,_eff ,0));_dac =_dac .AppendCurve (_cdd .NewCubicBezierCurve (_eff ,0,_eff ,-_acf ,_cac ,-_fdf ,0,-_fdf ));_dac =_dac .AppendCurve (_cdd .NewCubicBezierCurve (0,-_fdf ,-_cac ,-_fdf ,-_eff ,-_acf ,-_eff ,0));
_dac =_dac .Offset (_edc ,_bfg );if _ebb .Style .StrokeWidth > 0{_dac =_dac .Offset (_ebb .Style .StrokeWidth /2,_ebb .Style .StrokeWidth /2);};_cdd .DrawBezierPathWithCreator (_dac ,_bggf );if _ebb .Style .FillColor !=""&&_ebb .Style .StrokeColor !=""{_bggf .Add_B ();
}else if _ebb .Style .FillColor !=""{_bggf .Add_f ();}else if _ebb .Style .StrokeColor !=""{_bggf .Add_S ();};_bggf .Add_h ();_bggf .Add_Q ();};type commands struct{_accg []string ;_gag map[string ]int ;_ecb string ;_eae string ;};func _cdc (_bdg string )[]token {var (_ccd []token ;
_gaa string ;);for _ ,_cbd :=range _bdg {_defe :=string (_cbd );switch {case _edfa .isCommand (_defe ):_ccd ,_gaa =_eeac (_ccd ,_gaa );_ccd =append (_ccd ,token {_defe ,true });case _defe =="\u002e":if _gaa ==""{_gaa ="\u0030";};if _f .Contains (_gaa ,_defe ){_ccd =append (_ccd ,token {_gaa ,false });
_gaa ="\u0030";};fallthrough;case _defe >="\u0030"&&_defe <="\u0039"||_defe =="\u0065":_gaa +=_defe ;case _defe =="\u002d":if _f .HasSuffix (_gaa ,"\u0065"){_gaa +=_defe ;}else {_ccd ,_ =_eeac (_ccd ,_gaa );_gaa =_defe ;};default:_ccd ,_gaa =_eeac (_ccd ,_gaa );
};};_ccd ,_ =_eeac (_ccd ,_gaa );return _ccd ;};func _gdde (_dcd *GraphicSVG ,_agf *_ad .ContentCreator ){_agf .Add_q ();_dcd .Style .toContentStream (_agf );_cdec ,_eea :=_cee (_dcd .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);if _eea !=nil {_gf .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_eea );
return ;};if len (_cdec )%2> 0{_gf .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _ea :=0;_ea < len (_cdec );{if _ea ==0{_agf .Add_m (_cdec [_ea ]*_dcd ._aaf ,_cdec [_ea +1]*_dcd ._aaf );}else {_agf .Add_l (_cdec [_ea ]*_dcd ._aaf ,_cdec [_ea +1]*_dcd ._aaf );};_ea +=2;};if _dcd .Style .FillColor !=""&&_dcd .Style .StrokeColor !=""{_agf .Add_B ();
}else if _dcd .Style .FillColor !=""{_agf .Add_f ();}else if _dcd .Style .StrokeColor !=""{_agf .Add_S ();};_agf .Add_h ();_agf .Add_Q ();};func _dgbe (_ggd string )(_aebeg ,_gga string ){if _ggd ==""||(_ggd [len (_ggd )-1]>='0'&&_ggd [len (_ggd )-1]<='9'){return _ggd ,"";
};_aebeg =_ggd ;for _ ,_afafe :=range _ff {if _f .Contains (_aebeg ,_afafe ){_gga =_afafe ;};_aebeg =_f .TrimSuffix (_aebeg ,_afafe );};return ;};func _ecg (_gce *_ce .Decoder )(*GraphicSVG ,error ){for {_acb ,_adc :=_gce .Token ();if _acb ==nil &&_adc ==_d .EOF {break ;
};if _adc !=nil {return nil ,_adc ;};switch _cgd :=_acb .(type ){case _ce .StartElement :return _fgd (_cgd ),nil ;};};return &GraphicSVG {},nil ;};func ParseFromStream (source _d .Reader )(*GraphicSVG ,error ){_faf :=_ce .NewDecoder (source );_faf .CharsetReader =_cd .NewReaderLabel ;
_gc ,_afbe :=_ecg (_faf );if _afbe !=nil {return nil ,_afbe ;};if _aaa :=_gc .Decode (_faf );_aaa !=nil &&_aaa !=_d .EOF {return nil ,_aaa ;};return _gc ,nil ;};func _ffd (_agcc *GraphicSVG ,_afd *_ad .ContentCreator ){_afd .Add_q ();_agcc .Style .toContentStream (_afd );
_dgg ,_cdeb :=_abec (_agcc .Attributes ["\u0063\u0078"],64);if _cdeb !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cdeb .Error ());
};_ab ,_cdeb :=_abec (_agcc .Attributes ["\u0063\u0079"],64);if _cdeb !=nil {_gf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cdeb .Error ());
};_dfa ,_cdeb :=_abec (_agcc .Attributes ["\u0072"],64);if _cdeb !=nil {_gf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0072\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_cdeb .Error ());
};_adf :=_dfa *_agcc ._aaf ;_cega :=_dfa *_agcc ._aaf ;_ccc :=_adf *_gg ;_dca :=_cega *_gg ;_gdbd :=_cdd .NewCubicBezierPath ();_gdbd =_gdbd .AppendCurve (_cdd .NewCubicBezierCurve (-_adf ,0,-_adf ,_dca ,-_ccc ,_cega ,0,_cega ));_gdbd =_gdbd .AppendCurve (_cdd .NewCubicBezierCurve (0,_cega ,_ccc ,_cega ,_adf ,_dca ,_adf ,0));
_gdbd =_gdbd .AppendCurve (_cdd .NewCubicBezierCurve (_adf ,0,_adf ,-_dca ,_ccc ,-_cega ,0,-_cega ));_gdbd =_gdbd .AppendCurve (_cdd .NewCubicBezierCurve (0,-_cega ,-_ccc ,-_cega ,-_adf ,-_dca ,-_adf ,0));_gdbd =_gdbd .Offset (_dgg *_agcc ._aaf ,_ab *_agcc ._aaf );
if _agcc .Style .StrokeWidth > 0{_gdbd =_gdbd .Offset (_agcc .Style .StrokeWidth /2,_agcc .Style .StrokeWidth /2);};_cdd .DrawBezierPathWithCreator (_gdbd ,_afd );if _agcc .Style .FillColor !=""&&_agcc .Style .StrokeColor !=""{_afd .Add_B ();}else if _agcc .Style .FillColor !=""{_afd .Add_f ();
}else if _agcc .Style .StrokeColor !=""{_afd .Add_S ();};_afd .Add_h ();_afd .Add_Q ();};type token struct{_agea string ;_fcae bool ;};type GraphicSVGStyle struct{FillColor string ;StrokeColor string ;StrokeWidth float64 ;};